(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/club/car-page-add"],{"1cb0":function(e,a,o){"use strict";o.r(a);var t=o("db81"),n=o.n(t);for(var r in t)["default"].indexOf(r)<0&&function(e){o.d(a,e,(function(){return t[e]}))}(r);a["default"]=n.a},"2b21":function(e,a,o){},"54ab":function(e,a,o){"use strict";var t=o("2b21"),n=o.n(t);n.a},"63aa":function(e,a,o){"use strict";o.d(a,"b",(function(){return n})),o.d(a,"c",(function(){return r})),o.d(a,"a",(function(){return t}));var t={uniForms:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(o.bind(null,"8d8a"))},uniCard:function(){return o.e("uni_modules/uni-card/components/uni-card/uni-card").then(o.bind(null,"dd67"))},uniFormsItem:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item")]).then(o.bind(null,"34a0"))},uniDataSelect:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uni-data-select/components/uni-data-select/uni-data-select")]).then(o.bind(null,"fa28"))},uniEasyinput:function(){return o.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(o.bind(null,"80e2"))},uniNumberBox:function(){return o.e("uni_modules/uni-number-box/components/uni-number-box/uni-number-box").then(o.bind(null,"9503"))},uniDatetimePicker:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker")]).then(o.bind(null,"a467"))},uniPopup:function(){return o.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(o.bind(null,"8570"))},uniPopupDialog:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog")]).then(o.bind(null,"3b6c"))}},n=function(){var e=this.$createElement;this._self._c},r=[]},af3c:function(e,a,o){"use strict";(function(e,a){var t=o("47a9");o("d090");t(o("3240"));var n=t(o("cdd6"));e.__webpack_require_UNI_MP_PLUGIN__=o,a(n.default)}).call(this,o("3223")["default"],o("df3c")["createPage"])},cdd6:function(e,a,o){"use strict";o.r(a);var t=o("63aa"),n=o("1cb0");for(var r in n)["default"].indexOf(r)<0&&function(e){o.d(a,e,(function(){return n[e]}))}(r);o("54ab");var u=o("828b"),i=Object(u["a"])(n["default"],t["b"],t["c"],!1,null,null,null,!1,t["a"],void 0);a["default"]=i.exports},db81:function(e,a,o){"use strict";(function(e){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var t=o("b816"),n={data:function(){return{id:null,formData:{type_goType:"",type:"",goType:"",price:"",personNum:0,boardNum:0,packageNum:0,goTime:"",goPlace:"",endPlace:"",remark:"",phone:"",wechat:"",goArea:""},snowField:[],locationData:[],range:[{value:0,text:"车找人-去雪场"},{value:1,text:"车找人-雪场返回"},{value:2,text:"人找车-去雪场"},{value:3,text:"人找车-雪场返回"}],rules:{type_goType:{rules:[{required:!0,errorMessage:"类型不能为空"}]},price:{rules:[{required:!0,errorMessage:"价格不能为空"}]},personNum:{rules:[{required:!0,errorMessage:"数量不能为空"}]},boardNum:{rules:[{required:!0,errorMessage:"数量不能为空"}]},packageNum:{rules:[{required:!0,errorMessage:"数量不能为空"}]},goTime:{rules:[{required:!0,errorMessage:"时间不能为空"}]},goArea:{rules:[{required:!0,errorMessage:"出发地区不能为空"}]},goPlace:{rules:[{required:!0,errorMessage:"出发地点不能为空"}]},endPlace:{rules:[{required:!0,errorMessage:"到达地点不能为空"}]}}}},computed:{},onLoad:function(e){null!=e.id&&(this.id=e.id,this.getData()),this.getAreaData()},onReady:function(){},methods:{submit:function(a){var o=this;this.$refs[a].validate().then((function(a){o.validatePhoneWeChat()&&(console.log("success",a),o.formData.appToken=(0,t.getToken)(),0==o.formData.type_goType&&(o.formData.type="1",o.formData.goType="1"),1==o.formData.type_goType&&(o.formData.type="1",o.formData.goType="2"),2==o.formData.type_goType&&(o.formData.type="2",o.formData.goType="1"),3==o.formData.type_goType&&(o.formData.type="2",o.formData.goType="2"),console.log(o.formData),null==o.id?o.request("/app_api/carPool/addCarPoolInfo",o.formData,"POST").then((function(a){console.log("addCarPoolInfo:",o.formData),a&&200==a.code&&e.reLaunch({url:"/pages/club/submitSuccess?tabIndex=0"})})):o.request("/app_api/carPool/updateCarPoolInfo",o.formData,"POST").then((function(a){console.log("updateCarPoolInfo:",o.formData),a&&200==a.code&&e.reLaunch({url:"/pages/club/submitSuccess?tabIndex=0"})})))})).catch((function(e){console.log("err",e)}))},validatePhoneWeChat:function(){var a=!0,o="";return this.formData.phone||this.formData.wechat?this.formData.phone&&!/^1[3-9]\d{9}$/.test(this.formData.phone)?(a=!1,o="电话格式不正确"):this.formData.wechat&&!/^[\w\-_]{3,20}$/.test(this.formData.wechat)&&(a=!1,o="微信格式不正确"):(a=!1,o="电话或微信必须填写一个"),a?(console.log("表单校验通过，可以提交"),!0):(e.showToast({title:o,icon:"none"}),!1)},getData:function(){var e=this;console.log("请求后台，获取数据"),this.formData.id=this.id,this.request("/app_api/carPool/getCarPoolInfo",this.formData,"GET").then((function(a){a&&200==a.code&&(1==a.data.type&&(1==a.data.goType&&(e.formData.type_goType=0),2==a.data.goType&&(e.formData.type_goType=1)),2==a.data.type&&(1==a.data.goType&&(e.formData.type_goType=2),2==a.data.goType&&(e.formData.type_goType=3)),e.formData.price=a.data.price,e.formData.personNum=a.data.personNum,e.formData.boardNum=a.data.boardNum,e.formData.packageNum=a.data.packageNum,e.formData.goTime=a.data.goTime,e.formData.goPlace=a.data.goPlace,e.formData.endPlace=a.data.endPlace,e.formData.remark=a.data.remark,e.formData.phone=a.data.phone,e.formData.wechat=a.data.wechat,e.formData.goArea=a.data.goArea)}))},getAreaData:function(){var e=this;this.request("/app_api/carPool/loadAreaData").then((function(a){if(a){for(var o=[],t=0;t<a.data.length;t++)o[t]={},o[t]["text"]=a.data[t].name,o[t]["value"]=a.data[t].id;e.snowField=o}}))},dialogToggle:function(){this.msgType="info",this.$refs.alertDialog.open()},dialogConfirm:function(){console.log("点击确认")},dialogClose:function(){console.log("点击拒绝，返回上一页"),e.navigateBack({delta:1})}}};a.default=n}).call(this,o("df3c")["default"])}},[["af3c","common/runtime","common/vendor"]]]);