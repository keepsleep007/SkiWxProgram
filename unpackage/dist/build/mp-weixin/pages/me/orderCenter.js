(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/me/orderCenter"],{"06b7":function(e,t,n){"use strict";n.r(t);var o=n("309b"),a=n("9d71");for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n("80b7");var i=n("828b"),u=Object(i["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=u.exports},"0d6a":function(e,t,n){"use strict";(function(e){var o=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("b816"),r=o(n("06b7")),i=o(n("f178")),u=o(n("d2ea")),s={components:{ticketOrderList:r.default,activeOrderList:i.default,teacherOrderList:u.default},data:function(){return{tabList:[{name:"雪票订单",id:0},{name:"活动订单",id:1},{name:"教练订单",id:2}],tabIndex:0,indicatorLineLeft:0,indicatorLineWidth:0,isTap:!1}},onReady:function(){},onLoad:function(){},onShow:function(){console.log("onShow"),this._lastTabIndex=0,this.swiperWidth=0,this.tabbarWidth=0,this.tabListSize={},this._touchTabIndex=0,this.pageList=[];for(var e=0;e<this.tabList.length;e++){var t=this.$refs["page"+e];Array.isArray(t)?this.pageList.push(t[0]):this.pageList.push(t)}if(this.selectorQuery(),(0,a.needLogin)()&&void 0==(0,a.getUserInfo)())return this.msgType="info",void this.$refs.alertDialog.open();this.switchTab(this.tabIndex)},methods:{ontabtap:function(e){var t=e.target.dataset.current||e.currentTarget.dataset.current;this.isTap=!0;var n=this.tabListSize[t];this.updateIndicator(n.left,n.width),this._touchTabIndex=t,this.switchTab(t)},selectorQuery:function(){var t=this;e.createSelectorQuery().in(this).select(".tab-box").fields({dataset:!0,size:!0},(function(e){t.swiperWidth=e.width})).exec(),e.createSelectorQuery().in(this).selectAll(".uni-tab-item").boundingClientRect((function(e){e.forEach((function(e){t.tabListSize[e.dataset.current]=e})),t.updateIndicator(t.tabListSize[t.tabIndex].left,t.tabListSize[t.tabIndex].width)})).exec()},updateIndicator:function(e,t){this.indicatorLineLeft=e,this.indicatorLineWidth=t},switchTab:function(e){this.tabIndex=e,this.loadTabData(e)},scrollTabTo:function(e){var t=this.$refs["tabitem"+e][0],n=0;e>0&&(n=this.tabbarWidth/2-this.tabListSize[e].width/2,this.tabListSize[e].right<this.tabbarWidth/2&&(n=this.tabListSize[0].width)),dom.scrollToElement(t,{offset:-n})},loadTabData:function(e){this.pageList[e].loadData()},refreshData:function(){this.pageList[this.tabIndex].loadData("loadParams",[{value:"null"},{value:"null"},{value:"null"}])},onPullDownRefresh:function(){this.refreshData(),e.stopPullDownRefresh()},dialogClose:function(){console.log("点击关闭"),e.switchTab({url:"/pages/me/me"})},dialogConfirm:function(){console.log("点击确认"),e.navigateTo({url:"/pages/me/login-page"})}}};t.default=s}).call(this,n("df3c")["default"])},"12c0":function(e,t,n){"use strict";(function(e){var o=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("7eb4")),r=o(n("ee10")),i=n("b816"),u={components:{empty:function(){n.e("pages/active/empty").then(function(){return resolve(n("b7e9"))}.bind(null,n)).catch(n.oe)}},data:function(){return{pageNum:1,pageSize:10,tabCurrentIndex:0,teachModeList:[],navList:[{state:0,text:"全部",loadingType:"more",orderList:[]},{state:1,text:"待付款",loadingType:"more",orderList:[]},{state:2,text:"待服务",loadingType:"more",orderList:[]},{state:3,text:"已完成",loadingType:"more",orderList:[]},{state:4,text:"已关闭",loadingType:"more",orderList:[]}],closeItem:{},serverTime:0}},onLoad:function(e){var t=this;return(0,r.default)(a.default.mark((function n(){return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:console.log("options",e),t.tabCurrentIndex=e.state,t.loadTeacherSystemTag(),0==e.state&&t.loadData();case 4:case"end":return n.stop()}}),n)})))()},methods:{loadData:function(e){var t=this;return(0,r.default)(a.default.mark((function n(){var o,r,i,u;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.getServerTime();case 2:if(o=t.tabCurrentIndex,r=t.navList[o],r.state,"tabChange"===e&&(t.pageNum=1,r.loadingType="more",r.orderList=[]),"noMore"!==r.loadingType){n.next=9;break}return console.log("没有更多数据了"),n.abrupt("return");case 9:return r.loadingType="loading",n.next=12,t.loadDataForBackground(t.tabCurrentIndex,t.pageNum,t.pageSize);case 12:i=n.sent,u=i[0],u.forEach((function(e){r.orderList.push(e)})),t.$set(r,"loaded",!0),r.orderList.length>=i[1]?r.loadingType="noMore":(r.loadingType="more",t.pageNum=t.pageNum+1);case 17:case"end":return n.stop()}}),n)})))()},loadDataForBackground:function(t,n,o){var u=this;return(0,r.default)(a.default.mark((function r(){var s,c,d;return a.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s={},s.pageNum=n,s.pageSize=o,s.createBy=(0,i.getToken)(),0==t&&console.log("全部"),1==t&&(console.log("待付款"),s.orderStatus=3),2==t&&(console.log("待服务"),s.orderStatus=2),3==t&&(console.log("已完成"),s.orderStatus=1),4==t&&(console.log("已关闭"),s.orderStatus=0),c=[],d=[],console.log("requestParam",s),a.next=14,u.request("/app_api/teacher/getTeacherOrderList",s,"GET").then((function(t){if(t){if(console.log("getTeacherOrderList",t),200==t.code){for(var n=t.data[0],o=0;o<n.length;o++){var a=[];if(a[0]={},a[0]["startDate"]=n[o].startDate,a[0]["endDate"]=n[o].endDate,a[0]["sumPrice"]=n[o].sumPrice,a[0]["tcMode"]=n[o].tcMode,a[0]["tcTime"]=n[o].tcTime,c[o]={},c[o]["goodsList"]=a,c[o]["state"]=n[o].orderStatus,0==n[o].orderStatus&&(c[o]["stateTip"]="已关闭",c[o]["stateTipColor"]="#909399"),1==n[o].orderStatus&&(c[o]["stateTip"]="已完成",c[o]["stateTipColor"]="#fa436a"),2==n[o].orderStatus&&(c[o]["stateTip"]="待服务",c[o]["stateTipColor"]="#fa436a"),3==n[o].orderStatus){c[o]["stateTip"]="待付款",c[o]["stateTipColor"]="#fa436a";var r=new Date(n[o].createTime).getTime()/1e3,i=r+600;console.log("serverTime",u.serverTime),console.log("endTime",i),u.serverTime>i&&(console.log("订单超时未支付"),n[o].orderStatus=0,c[o]["stateTip"]="已关闭",c[o]["stateTipColor"]="#909399")}c[o]["time"]=n[o].createTime,c[o]["orderNo"]=n[o].orderNo,c[o]["orderStatus"]=n[o].orderStatus,c[o]["payStatus"]=n[o].payStatus,c[o]["id"]=n[o].id,c[o]["payMoney"]=n[o].payMoney,c[o]["wantPayMoney"]=n[o].wantPayMoney}d[1]=t.data[1]}500==t.code&&e.showToast({title:t.msg,icon:"none",duration:2e3})}})).catch((function(t){e.showToast({title:t,icon:"none",duration:2e3})}));case 14:return d[0]=c,a.abrupt("return",d);case 16:case"end":return a.stop()}}),r)})))()},loadTeacherSystemTag:function(){var e=this;this.request("/app_api/teacher/loadTeacherSystemTag","GET").then((function(t){console.log("loadTeacherSystemTag:",t),t&&(e.teachModeList=t.data[2])}))},changeTab:function(e){this.tabCurrentIndex=e.target.current,this.loadData("tabChange")},tabClick:function(e){this.tabCurrentIndex=e},deleteOrder:function(t){var n=this;e.showLoading({title:"请稍后"}),setTimeout((function(){n.navList[n.tabCurrentIndex].orderList.splice(t,1),e.hideLoading()}),600)},cancelOrder:function(e){this.closeItem=e,this.msgType="info",this.$refs.alertDialog.open()},dialogClose:function(){console.log("点击关闭")},dialogConfirm:function(){var t=this.closeItem;console.log("点击确认");var n={};n.id=t.id,this.request("/app_api/teacher/cancelTeacherOrder",n,"POST").then((function(n){n&&(console.log("cancelTeacherOrder",n),200==n.code&&1==n.data&&(t.orderStatus="0",t.stateTip="已关闭",t.stateTipColor="#909399",e.showToast({title:"取消成功",icon:"none",duration:2e3})))}))},orderStateExp:function(e){var t="",n="#fa436a";switch(+e){case 1:t="待付款";break;case 2:t="待发货";break;case 9:t="订单已关闭",n="#909399";break}return{stateTip:t,stateTipColor:n}},toOrderInfo:function(t){console.log("toOrderInfo",t),e.navigateTo({url:"/pages/teacher/orderListInfo?id="+t.id})},toPay:function(t){e.navigateTo({url:"/pages/active/pay?orderId="+t+"&type=2"})},getServerTime:function(){var e=this;return(0,r.default)(a.default.mark((function t(){return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.request("/app_api/util/getServerTime","","GET").then((function(t){t&&(console.log("getServerTime",t),200==t.code&&(e.serverTime=t.data))}));case 2:case"end":return t.stop()}}),t)})))()}}};t.default=u}).call(this,n("df3c")["default"])},"24d5":function(e,t,n){"use strict";n.r(t);var o=n("12c0"),a=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=a.a},"309b":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o}));var o={uniLoadMore:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-load-more/components/uni-load-more/uni-load-more")]).then(n.bind(null,"94e9"))},uniPopup:function(){return n.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(n.bind(null,"8570"))},uniPopupDialog:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog")]).then(n.bind(null,"3b6c"))}},a=function(){var e=this,t=e.$createElement,n=(e._self._c,e.__map(e.navList,(function(t,n){var o=e.__get_orig(t),a=!0===t.loaded&&0===t.orderList.length;return{$orig:o,g0:a}})));e.$mp.data=Object.assign({},{$root:{l0:n}})},r=[]},3142:function(e,t,n){},"31bf":function(e,t,n){"use strict";(function(e,t){var o=n("47a9");n("d090");o(n("3240"));var a=o(n("3b69"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},"3b69":function(e,t,n){"use strict";n.r(t);var o=n("deed"),a=n("6392");for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n("8afe");var i=n("828b"),u=Object(i["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=u.exports},4735:function(e,t,n){"use strict";var o=n("b921"),a=n.n(o);a.a},6392:function(e,t,n){"use strict";n.r(t);var o=n("0d6a"),a=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=a.a},"66b8":function(e,t,n){"use strict";n.r(t);var o=n("c2e5"),a=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=a.a},"80b7":function(e,t,n){"use strict";var o=n("e1ca"),a=n.n(o);a.a},"8afe":function(e,t,n){"use strict";var o=n("3142"),a=n.n(o);a.a},"8b57":function(e,t,n){"use strict";var o=n("d88b"),a=n.n(o);a.a},"95a8":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o}));var o={uniLoadMore:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-load-more/components/uni-load-more/uni-load-more")]).then(n.bind(null,"94e9"))},uniPopup:function(){return n.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(n.bind(null,"8570"))},uniPopupDialog:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog")]).then(n.bind(null,"3b6c"))}},a=function(){var e=this,t=e.$createElement,n=(e._self._c,e.__map(e.navList,(function(t,n){var o=e.__get_orig(t),a=!0===t.loaded&&0===t.orderList.length,r=e.__map(t.orderList,(function(t,n){var o=e.__get_orig(t),a=t.goodsList.length,r=1===a?e.getBaseUrl():null;return{$orig:o,g1:a,m0:r}}));return{$orig:o,g0:a,l0:r}})));e.$mp.data=Object.assign({},{$root:{l1:n}})},r=[]},"9d71":function(e,t,n){"use strict";n.r(t);var o=n("9ef1"),a=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=a.a},"9ef1":function(e,t,n){"use strict";(function(e){var o=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("7eb4")),r=o(n("ee10")),i=n("b816"),u={components:{empty:function(){n.e("pages/active/empty").then(function(){return resolve(n("b7e9"))}.bind(null,n)).catch(n.oe)}},data:function(){return{pageNum:1,pageSize:10,tabCurrentIndex:0,teachModeList:[],navList:[{state:0,text:"全部",loadingType:"more",orderList:[]},{state:1,text:"待付款",loadingType:"more",orderList:[]},{state:2,text:"待服务",loadingType:"more",orderList:[]},{state:3,text:"已完成",loadingType:"more",orderList:[]},{state:4,text:"已关闭",loadingType:"more",orderList:[]}],closeItem:{},serverTime:0}},onLoad:function(e){var t=this;return(0,r.default)(a.default.mark((function n(){return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:console.log("orderList-options",e),t.tabCurrentIndex=e.state,0==e.state&&t.loadData();case 3:case"end":return n.stop()}}),n)})))()},methods:{loadData:function(e){var t=this;return(0,r.default)(a.default.mark((function n(){var o,r,i,u;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.getServerTime();case 2:if(o=t.tabCurrentIndex,r=t.navList[o],r.state,"tabChange"===e&&(t.pageNum=1,r.loadingType="more",r.orderList=[]),"noMore"!==r.loadingType){n.next=9;break}return console.log("没有更多数据了"),n.abrupt("return");case 9:return r.loadingType="loading",n.next=12,t.loadDataForBackground(t.tabCurrentIndex,t.pageNum,t.pageSize);case 12:i=n.sent,console.log("orderArr",i),u=i[0],u.forEach((function(e){r.orderList.push(e)})),t.$set(r,"loaded",!0),r.orderList.length>=i[1]?r.loadingType="noMore":(r.loadingType="more",t.pageNum=t.pageNum+1);case 18:case"end":return n.stop()}}),n)})))()},loadDataForBackground:function(t,n,o){var u=this;return(0,r.default)(a.default.mark((function r(){var s,c,d;return a.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s={},s.pageNum=n,s.pageSize=o,s.createBy=(0,i.getToken)(),0==t&&console.log("全部"),1==t&&(console.log("待付款"),s.orderStatus=3),2==t&&(console.log("待服务"),s.orderStatus=2),3==t&&(console.log("已完成"),s.orderStatus=1),4==t&&(console.log("已关闭"),s.orderStatus=0),c=[],d=[],a.next=13,u.request("/app_api/ticket/getTikcetOrderList",s,"GET").then((function(t){if(t){if(console.log("getTikcetOrderList",t),200==t.code){for(var n=t.data[0],o=0;o<n.length;o++){if(c[o]={},c[o]["state"]=n[o].orderStatus,0==n[o].orderStatus&&(c[o]["stateTip"]="已关闭",c[o]["stateTipColor"]="#909399"),1==n[o].orderStatus&&(c[o]["stateTip"]="已完成",c[o]["stateTipColor"]="#fa436a"),2==n[o].orderStatus&&(c[o]["stateTip"]="待服务",c[o]["stateTipColor"]="#fa436a"),3==n[o].orderStatus){c[o]["stateTip"]="待付款",c[o]["stateTipColor"]="#fa436a";var a=new Date(n[o].createTime).getTime()/1e3,r=a+600;console.log("serverTime",u.serverTime),console.log("endTime",r),u.serverTime>r&&(console.log("订单超时未支付"),n[o].orderStatus=0,c[o]["stateTip"]="已关闭",c[o]["stateTipColor"]="#909399")}c[o]["time"]=n[o].createTime,c[o]["orderNo"]=n[o].orderNo,c[o]["orderStatus"]=n[o].orderStatus,c[o]["payStatus"]=n[o].payStatus,c[o]["id"]=n[o].id,c[o]["title"]=n[o].title,c[o]["payMoney"]=n[o].payMoney,c[o]["wantPayMoney"]=n[o].wantPayMoney,c[o]["saleNumber"]=n[o].saleNumber,c[o]["useDate"]=n[o].useDate}d[1]=t.data[1]}500==t.code&&e.showToast({title:t.msg,icon:"none",duration:2e3})}})).catch((function(t){e.showToast({title:t,icon:"none",duration:2e3})}));case 13:return d[0]=c,a.abrupt("return",d);case 15:case"end":return a.stop()}}),r)})))()},changeTab:function(e){this.tabCurrentIndex=e.target.current,this.loadData("tabChange")},tabClick:function(e){this.tabCurrentIndex=e},deleteOrder:function(t){var n=this;e.showLoading({title:"请稍后"}),setTimeout((function(){n.navList[n.tabCurrentIndex].orderList.splice(t,1),e.hideLoading()}),600)},cancelOrder:function(e){this.closeItem=e,this.msgType="info",this.$refs.alertDialog.open()},dialogClose:function(){console.log("点击关闭")},dialogConfirm:function(){var t=this.closeItem;console.log("点击确认");var n={};n.id=t.id,this.request("/app_api/ticket/cancelTicketOrder",n,"POST").then((function(n){n&&200==n.code&&1==n.data&&(t.orderStatus="0",t.stateTip="已关闭",t.stateTipColor="#909399",e.showToast({title:"取消成功",icon:"none",duration:2e3}))}))},orderStateExp:function(e){var t="",n="#fa436a";switch(+e){case 1:t="待付款";break;case 2:t="待发货";break;case 9:t="订单已关闭",n="#909399";break}return{stateTip:t,stateTipColor:n}},toOrderInfo:function(t){console.log("toOrderInfo",t),e.navigateTo({url:"/pages/ticket/orderListInfo?id="+t.id})},toPay:function(t){e.navigateTo({url:"/pages/active/pay?orderId="+t+"&type=1"})},getServerTime:function(){var e=this;return(0,r.default)(a.default.mark((function t(){return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.request("/app_api/util/getServerTime","","GET").then((function(t){t&&(console.log("getServerTime",t),200==t.code&&(e.serverTime=t.data))}));case 2:case"end":return t.stop()}}),t)})))()}}};t.default=u}).call(this,n("df3c")["default"])},b921:function(e,t,n){},c2e5:function(e,t,n){"use strict";(function(e){var o=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("7eb4")),r=o(n("ee10")),i=n("b816"),u={components:{empty:function(){n.e("pages/active/empty").then(function(){return resolve(n("b7e9"))}.bind(null,n)).catch(n.oe)}},data:function(){return{pageNum:1,pageSize:10,tabCurrentIndex:0,navList:[{state:0,text:"全部",loadingType:"more",orderList:[]},{state:1,text:"待付款",loadingType:"more",orderList:[]},{state:2,text:"待服务",loadingType:"more",orderList:[]},{state:3,text:"已完成",loadingType:"more",orderList:[]},{state:4,text:"已关闭",loadingType:"more",orderList:[]}],closeItem:{},serverTime:0}},onLoad:function(e){var t=this;return(0,r.default)(a.default.mark((function n(){return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.tabCurrentIndex=+e.state,0==e.state&&t.loadData();case 2:case"end":return n.stop()}}),n)})))()},methods:{loadData:function(e){var t=this;return(0,r.default)(a.default.mark((function n(){var o,r,i,u;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.getServerTime();case 2:if(o=t.tabCurrentIndex,r=t.navList[o],r.state,"tabChange"===e&&(t.pageNum=1,r.loadingType="more",r.orderList=[]),"noMore"!==r.loadingType){n.next=9;break}return console.log("没有更多数据了"),n.abrupt("return");case 9:return r.loadingType="loading",n.next=12,t.loadDataForBackground(t.tabCurrentIndex,t.pageNum,t.pageSize);case 12:i=n.sent,console.log("orderArr",i),u=i[0],u.forEach((function(e){r.orderList.push(e)})),t.$set(r,"loaded",!0),r.orderList.length>=i[1]?(console.log("count",r.orderList.length),console.log("SUM",i[1]),r.loadingType="noMore"):(r.loadingType="more",t.pageNum=t.pageNum+1);case 18:case"end":return n.stop()}}),n)})))()},loadDataForBackground:function(t,n,o){var u=this;return(0,r.default)(a.default.mark((function r(){var s,c,d;return a.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s={},s.pageNum=n,s.pageSize=o,s.createBy=(0,i.getToken)(),0==t&&console.log("全部"),1==t&&(console.log("待付款"),s.orderStatus=3),2==t&&(console.log("待服务"),s.orderStatus=2),3==t&&(console.log("已完成"),s.orderStatus=1),4==t&&(console.log("已关闭"),s.orderStatus=0),c=[],d=[],console.log("requestParam",s),a.next=14,u.request("/app_api/activity/getMyActivityOrder",s,"GET").then((function(t){if(t){if(console.log("getMyActivityOrder",t),200==t.code){for(var n=t.data[0],o=0;o<n.length;o++){var a=[];if(a[0]={},a[0]["title"]=n[o].activityTitle,a[0]["price"]=n[o].payMoney,a[0]["number"]=n[o].saleNumber,a[0]["coverImage"]=n[o].coverImage,a[0]["attr"]=n[o].productName,a[0]["stockType"]=n[o].stockType,c[o]={},c[o]["goodsList"]=a,c[o]["state"]=n[o].orderStatus,0==n[o].orderStatus&&(c[o]["stateTip"]="已关闭",c[o]["stateTipColor"]="#909399"),1==n[o].orderStatus&&(c[o]["stateTip"]="已完成",c[o]["stateTipColor"]="#fa436a"),2==n[o].orderStatus&&(c[o]["stateTip"]="待服务",c[o]["stateTipColor"]="#fa436a"),3==n[o].orderStatus){c[o]["stateTip"]="待付款",c[o]["stateTipColor"]="#fa436a";var r=new Date(n[o].createTime).getTime()/1e3,i=r+600;console.log("serverTime",u.serverTime),console.log("endTime",i),u.serverTime>i&&(console.log("订单超时未支付"),n[o].orderStatus=0,c[o]["stateTip"]="已关闭",c[o]["stateTipColor"]="#909399")}c[o]["time"]=n[o].createTime,c[o]["orderNo"]=n[o].orderNo,c[o]["orderStatus"]=n[o].orderStatus,c[o]["payStatus"]=n[o].payStatus,c[o]["id"]=n[o].id,c[o]["payMoney"]=n[o].payMoney,c[o]["wantPayMoney"]=n[o].wantPayMoney}d[1]=t.data[1]}500==t.code&&e.showToast({title:t.msg,icon:"none",duration:2e3})}})).catch((function(t){e.showToast({title:t,icon:"none",duration:2e3})}));case 14:return d[0]=c,a.abrupt("return",d);case 16:case"end":return a.stop()}}),r)})))()},changeTab:function(e){this.tabCurrentIndex=e.target.current,this.loadData("tabChange")},tabClick:function(e){this.tabCurrentIndex=e},deleteOrder:function(t){var n=this;e.showLoading({title:"请稍后"}),setTimeout((function(){n.navList[n.tabCurrentIndex].orderList.splice(t,1),e.hideLoading()}),600)},cancelOrder:function(e){this.closeItem=e,this.msgType="info",this.$refs.alertDialog.open()},dialogClose:function(){console.log("点击关闭")},dialogConfirm:function(){var t=this.closeItem;console.log("点击确认");var n={};n.id=t.id,this.request("/app_api/activity/cancelActivityOrder",n,"POST").then((function(n){n&&(console.log("cancelActivityOrder",n),200==n.code&&1==n.data&&(t.orderStatus="0",t.stateTip="已关闭",t.stateTipColor="#909399",e.showToast({title:"取消成功",icon:"none",duration:2e3})))}))},orderStateExp:function(e){var t="",n="#fa436a";switch(+e){case 1:t="待付款";break;case 2:t="待发货";break;case 9:t="订单已关闭",n="#909399";break}return{stateTip:t,stateTipColor:n}},toOrderInfo:function(t){console.log("toOrderInfo",t),e.navigateTo({url:"/pages/active/orderListInfo?id="+t.id})},toPay:function(t){e.navigateTo({url:"/pages/active/pay?orderId="+t+"&type=0"})},getServerTime:function(){var e=this;return(0,r.default)(a.default.mark((function t(){return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.request("/app_api/util/getServerTime","","GET").then((function(t){t&&(console.log("getServerTime",t),200==t.code&&(e.serverTime=t.data))}));case 2:case"end":return t.stop()}}),t)})))()}}};t.default=u}).call(this,n("df3c")["default"])},d2ea:function(e,t,n){"use strict";n.r(t);var o=n("dcfd"),a=n("24d5");for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n("4735");var i=n("828b"),u=Object(i["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=u.exports},d88b:function(e,t,n){},dcfd:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o}));var o={uniLoadMore:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-load-more/components/uni-load-more/uni-load-more")]).then(n.bind(null,"94e9"))},uniPopup:function(){return n.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(n.bind(null,"8570"))},uniPopupDialog:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog")]).then(n.bind(null,"3b6c"))}},a=function(){var e=this,t=e.$createElement,n=(e._self._c,e.__map(e.navList,(function(t,n){var o=e.__get_orig(t),a=!0===t.loaded&&0===t.orderList.length,r=e.__map(t.orderList,(function(t,n){var o=e.__get_orig(t),a=t.goodsList.length;return{$orig:o,g1:a}}));return{$orig:o,g0:a,l0:r}})));e.$mp.data=Object.assign({},{$root:{l1:n}})},r=[]},deed:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o}));var o={uniPopup:function(){return n.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(n.bind(null,"8570"))},uniPopupDialog:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog")]).then(n.bind(null,"3b6c"))}},a=function(){var e=this.$createElement;this._self._c},r=[]},e1ca:function(e,t,n){},f178:function(e,t,n){"use strict";n.r(t);var o=n("95a8"),a=n("66b8");for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n("8b57");var i=n("828b"),u=Object(i["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=u.exports}},[["31bf","common/runtime","common/vendor"]]]);