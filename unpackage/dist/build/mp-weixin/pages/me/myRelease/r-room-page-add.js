(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/me/myRelease/r-room-page-add"],{"0690":function(e,t,o){"use strict";(function(e,t){var a=o("47a9");o("d090");a(o("3240"));var n=a(o("77c5"));e.__webpack_require_UNI_MP_PLUGIN__=o,t(n.default)}).call(this,o("3223")["default"],o("df3c")["createPage"])},"30fd":function(e,t,o){"use strict";o.d(t,"b",(function(){return n})),o.d(t,"c",(function(){return i})),o.d(t,"a",(function(){return a}));var a={uniForms:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(o.bind(null,"8d8a"))},uniCard:function(){return o.e("uni_modules/uni-card/components/uni-card/uni-card").then(o.bind(null,"dd67"))},uniFormsItem:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item")]).then(o.bind(null,"34a0"))},uniDataSelect:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uni-data-select/components/uni-data-select/uni-data-select")]).then(o.bind(null,"fa28"))},uniEasyinput:function(){return o.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(o.bind(null,"80e2"))},uniDatetimePicker:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker")]).then(o.bind(null,"a467"))},uniPopup:function(){return o.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(o.bind(null,"8570"))},uniPopupDialog:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog")]).then(o.bind(null,"3b6c"))}},n=function(){var e=this.$createElement;this._self._c},i=[]},"63c7":function(e,t,o){"use strict";var a=o("7693"),n=o.n(a);n.a},"6a62":function(e,t,o){"use strict";o.r(t);var a=o("9adc"),n=o.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){o.d(t,e,(function(){return a[e]}))}(i);t["default"]=n.a},7693:function(e,t,o){},"77c5":function(e,t,o){"use strict";o.r(t);var a=o("30fd"),n=o("6a62");for(var i in n)["default"].indexOf(i)<0&&function(e){o.d(t,e,(function(){return n[e]}))}(i);o("63c7");var r=o("828b"),u=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);t["default"]=u.exports},"9adc":function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o("b816"),n={data:function(){return{id:null,formData:{type:"",price:"",inTime:"",outTime:"",iSex:"",ySex:"",region:"",roomType:"",remark:"",createTime:"",phone:"",wechat:"",uid:""},snowField:[],select_data_type:[{value:"1",text:"房找人"},{value:"2",text:"人找房"}],select_data_iSex:[{value:"0",text:"男"},{value:"1",text:"女"}],select_data_ySex:[{value:"0",text:"男"},{value:"1",text:"女"},{value:"2",text:"不限"}],select_data_region:[],select_data_roomType:[],rules:{type:{rules:[{required:!0,errorMessage:"类型不能为空"}]},price:{rules:[{required:!0,errorMessage:"价格不能为空"}]},inTime:{rules:[{required:!0,errorMessage:"入住时间不能为空"}]},outTime:{rules:[{required:!0,errorMessage:"离店时间不能为空"}]},iSex:{rules:[{required:!0,errorMessage:"性别不能为空"}]},ySex:{rules:[{required:!0,errorMessage:"性别不能为空"}]},region:{rules:[{required:!0,errorMessage:"地区不能为空"}]},roomType:{rules:[{required:!0,errorMessage:"房型不能为空"}]}}}},computed:{},onLoad:function(e){null!=e.id&&(this.id=e.id,this.getData()),this.getAreaData(),this.getRoomTypeData()},onReady:function(){},methods:{submit:function(t){var o=this;this.$refs[t].validate().then((function(t){o.validatePhoneWeChat()&&(console.log("success",t),o.formData.appToken=(0,a.getToken)(),null==o.id?o.request("/app_api/roomPool/addRoomPoolInfo",o.formData,"POST").then((function(t){console.log("addRoomPoolInfo:",o.formData),t&&200==t.code&&e.reLaunch({url:"/pages/me/myRelease/r-submitSuccess?tabIndex=1"})})):o.request("/app_api/roomPool/updateRoomPoolInfo",o.formData,"POST").then((function(t){console.log("updateRoomPoolInfo:",o.formData),t&&200==t.code&&e.navigateTo({url:"/pages/me/myRelease/r-submitSuccess?tabIndex=1"})})))})).catch((function(e){console.log("err",e)}))},validatePhoneWeChat:function(){var t=!0,o="";return this.formData.phone||this.formData.wechat?this.formData.phone&&!/^1[3-9]\d{9}$/.test(this.formData.phone)?(t=!1,o="电话格式不正确"):this.formData.wechat&&!/^[\w\-_]{3,20}$/.test(this.formData.wechat)&&(t=!1,o="微信格式不正确"):(t=!1,o="电话或微信必须填写一个"),t?(console.log("表单校验通过，可以提交"),!0):(e.showToast({title:o,icon:"none"}),!1)},getData:function(){var e=this;console.log("请求后台，获取数据"),this.formData.id=this.id,this.request("/app_api/roomPool/getRoomPoolInfo",this.formData,"GET").then((function(t){t&&200==t.code&&(console.log("getRoomPoolInfo:",t.data),e.formData.type=t.data.type,e.formData.price=t.data.price,e.formData.inTime=t.data.inTime,e.formData.outTime=t.data.outTime,e.formData.iSex=t.data.iSex,e.formData.ySex=t.data.ySex,e.formData.region=t.data.region,e.formData.roomType=t.data.roomType,e.formData.remark=t.data.remark,e.formData.phone=t.data.phone,e.formData.wechat=t.data.wechat,e.formData.uid=t.data.uid)}))},getAreaData:function(){var e=this;this.request("/app_api/roomPool/loadRoomAreaData").then((function(t){if(t){for(var o=[],a=0;a<t.data.length;a++)o[a]={},o[a]["text"]=t.data[a].name,o[a]["value"]=t.data[a].id;e.select_data_region=o}}))},getRoomTypeData:function(){var e=this;this.request("/app_api/roomPool/load_roomType","","GET").then((function(t){if(t){for(var o=[],a=0;a<t.data.length;a++)o[a]={},o[a]["text"]=t.data[a].dictLabel,o[a]["value"]=t.data[a].dictValue;e.select_data_roomType=o}}))},dialogToggle:function(){this.msgType="info",this.$refs.alertDialog.open()},dialogConfirm:function(){console.log("点击确认")},dialogClose:function(){console.log("点击拒绝，返回上一页"),e.navigateBack({delta:1})}}};t.default=n}).call(this,o("df3c")["default"])}},[["0690","common/runtime","common/vendor"]]]);